# UORCA Explorer

Interactive exploration of RNA-seq results from UORCA analyses

## Overview

UORCA Explorer is a Streamlit web application that provides an interactive interface for exploring RNA-seq analysis results generated by the UORCA pipeline. It allows you to:

- Select any subset of genes, datasets, or contrasts
- Instantly visualize differential expression patterns through interactive heatmaps
- Explore gene expression profiles across samples with customizable plots
- Share results with colleagues through a simple web interface

## Installation

### Prerequisites

- Python 3.8+
- UORCA analysis results directory

### Setup with uv (recommended)

[uv](https://github.com/astral-sh/uv) is a fast, reliable Python package installer and resolver.

```bash
# Install uv if you don't have it yet
curl -LsSf https://astral.sh/uv/install.sh | sh

# Create a virtual environment
uv venv

# Activate the environment
source .venv/bin/activate  # On Linux/macOS
.venv\Scripts\activate     # On Windows

# Install required packages
uv pip install streamlit plotly pandas scipy
```

### Alternative setup with pip

```bash
# Create a virtual environment
python -m venv .venv

# Activate the environment
source .venv/bin/activate  # On Linux/macOS
.venv\Scripts\activate     # On Windows

# Install required packages
pip install streamlit plotly pandas scipy
```

## Usage

### Running the app locally

```bash
# Navigate to the directory containing uorca_explorer.py
cd UORCA/main_workflow/additional_scripts

# Run the Streamlit app
streamlit run uorca_explorer.py
```

This will start the app on the default port (8501) and open it in your browser.

### Remote access via SSH tunnel

If the app is running on a remote server (e.g., HPC cluster), you can access it using an SSH tunnel:

1. Start the app on the remote server:
   ```bash
   # On remote server
   streamlit run uorca_explorer.py --server.port 8501
   ```

2. Create an SSH tunnel from your local machine:
   ```bash
   # On your local machine
   ssh -L 8000:127.0.0.1:8501 user@remote.server
   ```

3. Open `http://127.0.0.1:8000` in your browser

### Running the app in a persistent session

For long-running sessions on a server, use tmux or screen:

```bash
# Start a new tmux session
tmux new -s uorca-explorer

# Run the app
streamlit run uorca_explorer.py

# Detach from the session (Ctrl+B, then D)
# To reattach later:
tmux attach -t uorca-explorer
```

## Features

### Gene Selection
- Select genes from a complete list
- Search for genes by name/pattern
- View top differentially expressed genes

### Dataset and Contrast Selection
- Filter to specific datasets
- Select contrasts of interest
- See contrast descriptions

### Visualization Options
- Interactive heatmap for differential expression
- Violin or box plots for gene expression
- Customizable plot settings

## Troubleshooting

### Common Issues

- **No data loaded**: Ensure you've entered the correct path to your UORCA results directory
- **Missing datasets**: Check that your results contain properly formatted CPM.csv files
- **Slow loading**: Large datasets may take time to load initially (data is cached after first load)
- **Browser freezes**: If selecting too many genes, reduce the selection to 30 or fewer

### Performance Tips

- Use the gene search or Top DEGs features instead of scrolling through all genes
- Limit visualizations to a reasonable number of genes (5-15) for best performance
- If the app becomes unresponsive, refresh the browser tab

## License

This software is part of the UORCA package. Please refer to the main UORCA license for terms of use.